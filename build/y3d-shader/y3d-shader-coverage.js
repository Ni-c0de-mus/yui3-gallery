if (typeof __coverage__ === 'undefined') { __coverage__ = {}; }
if (!__coverage__['build/y3d-shader/y3d-shader.js']) {
   __coverage__['build/y3d-shader/y3d-shader.js'] = {"path":"build/y3d-shader/y3d-shader.js","s":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0},"fnMap":{"1":{"name":"(anonymous_1)","line":1,"loc":{"start":{"line":1,"column":22},"end":{"line":1,"column":41}}},"2":{"name":"(anonymous_2)","line":76,"loc":{"start":{"line":76,"column":10},"end":{"line":76,"column":45}}},"3":{"name":"(anonymous_3)","line":103,"loc":{"start":{"line":103,"column":18},"end":{"line":103,"column":36}}},"4":{"name":"(anonymous_4)","line":116,"loc":{"start":{"line":116,"column":20},"end":{"line":116,"column":38}}},"5":{"name":"(anonymous_5)","line":136,"loc":{"start":{"line":136,"column":7},"end":{"line":136,"column":36}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":169,"column":31}},"2":{"start":{"line":3,"column":0},"end":{"line":73,"column":14}},"3":{"start":{"line":75,"column":0},"end":{"line":167,"column":2}},"4":{"start":{"line":77,"column":2},"end":{"line":77,"column":21}},"5":{"start":{"line":79,"column":2},"end":{"line":86,"column":3}},"6":{"start":{"line":80,"column":3},"end":{"line":80,"column":58}},"7":{"start":{"line":81,"column":3},"end":{"line":81,"column":33}},"8":{"start":{"line":83,"column":7},"end":{"line":86,"column":3}},"9":{"start":{"line":84,"column":3},"end":{"line":84,"column":56}},"10":{"start":{"line":85,"column":3},"end":{"line":85,"column":31}},"11":{"start":{"line":88,"column":2},"end":{"line":88,"column":35}},"12":{"start":{"line":89,"column":2},"end":{"line":89,"column":42}},"13":{"start":{"line":91,"column":2},"end":{"line":91,"column":39}},"14":{"start":{"line":92,"column":2},"end":{"line":92,"column":32}},"15":{"start":{"line":94,"column":2},"end":{"line":98,"column":3}},"16":{"start":{"line":95,"column":3},"end":{"line":95,"column":49}},"17":{"start":{"line":97,"column":3},"end":{"line":97,"column":15}},"18":{"start":{"line":100,"column":2},"end":{"line":100,"column":16}},"19":{"start":{"line":104,"column":2},"end":{"line":106,"column":3}},"20":{"start":{"line":105,"column":3},"end":{"line":105,"column":23}},"21":{"start":{"line":108,"column":2},"end":{"line":109,"column":39}},"22":{"start":{"line":111,"column":2},"end":{"line":111,"column":51}},"23":{"start":{"line":113,"column":2},"end":{"line":113,"column":22}},"24":{"start":{"line":117,"column":2},"end":{"line":119,"column":3}},"25":{"start":{"line":118,"column":3},"end":{"line":118,"column":25}},"26":{"start":{"line":121,"column":2},"end":{"line":122,"column":39}},"27":{"start":{"line":124,"column":2},"end":{"line":124,"column":40}},"28":{"start":{"line":126,"column":2},"end":{"line":126,"column":53}},"29":{"start":{"line":128,"column":2},"end":{"line":128,"column":111}},"30":{"start":{"line":129,"column":2},"end":{"line":129,"column":78}},"31":{"start":{"line":131,"column":2},"end":{"line":131,"column":88}},"32":{"start":{"line":133,"column":2},"end":{"line":133,"column":24}},"33":{"start":{"line":137,"column":2},"end":{"line":139,"column":37}},"34":{"start":{"line":141,"column":2},"end":{"line":141,"column":48}},"35":{"start":{"line":142,"column":2},"end":{"line":142,"column":46}},"36":{"start":{"line":144,"column":2},"end":{"line":144,"column":31}},"37":{"start":{"line":146,"column":2},"end":{"line":148,"column":3}},"38":{"start":{"line":147,"column":3},"end":{"line":147,"column":41}},"39":{"start":{"line":150,"column":2},"end":{"line":150,"column":89}},"40":{"start":{"line":151,"column":2},"end":{"line":151,"column":67}},"41":{"start":{"line":153,"column":2},"end":{"line":153,"column":83}},"42":{"start":{"line":154,"column":2},"end":{"line":154,"column":64}},"43":{"start":{"line":156,"column":2},"end":{"line":156,"column":85}},"44":{"start":{"line":157,"column":2},"end":{"line":157,"column":65}},"45":{"start":{"line":159,"column":2},"end":{"line":159,"column":92}},"46":{"start":{"line":160,"column":2},"end":{"line":160,"column":90}},"47":{"start":{"line":161,"column":2},"end":{"line":161,"column":84}},"48":{"start":{"line":162,"column":2},"end":{"line":162,"column":80}},"49":{"start":{"line":163,"column":2},"end":{"line":163,"column":88}},"50":{"start":{"line":165,"column":2},"end":{"line":165,"column":17}}},"branchMap":{"1":{"line":79,"type":"if","locations":[{"start":{"line":79,"column":2},"end":{"line":79,"column":2}},{"start":{"line":79,"column":2},"end":{"line":79,"column":2}}]},"2":{"line":83,"type":"if","locations":[{"start":{"line":83,"column":7},"end":{"line":83,"column":7}},{"start":{"line":83,"column":7},"end":{"line":83,"column":7}}]},"3":{"line":94,"type":"if","locations":[{"start":{"line":94,"column":2},"end":{"line":94,"column":2}},{"start":{"line":94,"column":2},"end":{"line":94,"column":2}}]},"4":{"line":104,"type":"if","locations":[{"start":{"line":104,"column":2},"end":{"line":104,"column":2}},{"start":{"line":104,"column":2},"end":{"line":104,"column":2}}]},"5":{"line":109,"type":"binary-expr","locations":[{"start":{"line":109,"column":15},"end":{"line":109,"column":32}},{"start":{"line":109,"column":36},"end":{"line":109,"column":38}}]},"6":{"line":117,"type":"if","locations":[{"start":{"line":117,"column":2},"end":{"line":117,"column":2}},{"start":{"line":117,"column":2},"end":{"line":117,"column":2}}]},"7":{"line":122,"type":"binary-expr","locations":[{"start":{"line":122,"column":15},"end":{"line":122,"column":32}},{"start":{"line":122,"column":36},"end":{"line":122,"column":38}}]},"8":{"line":146,"type":"if","locations":[{"start":{"line":146,"column":2},"end":{"line":146,"column":2}},{"start":{"line":146,"column":2},"end":{"line":146,"column":2}}]}},"code":["(function () { YUI.add('y3d-shader', function (Y, NAME) {","","var colorProgram = null,","\ttextureProgram = null,","","\tfragmentShaderSource = [","\t\t'precision mediump float;',","","\t\t'varying vec4 fragmentColor;',","\t\t'varying vec3 lightWeight;',","","\t\t'#ifdef USE_TEXTURE',","\t\t\t'varying vec2 vertexTextureCoordinates;',","\t\t\t'uniform sampler2D sampler;',","\t\t'#endif',","","\t\t'void main(void) {',","\t\t\t'gl_FragColor = fragmentColor;',","","\t\t\t'#ifdef USE_TEXTURE',","\t\t\t\t'gl_FragColor = gl_FragColor * texture2D(sampler, vertexTextureCoordinates);',","\t\t\t'#endif',","","\t\t\t'#ifdef USE_LIGHT',","\t\t\t\t'gl_FragColor = vec4(gl_FragColor.rgb * lightWeight, gl_FragColor.a);',","\t\t\t'#endif',","\t\t'}'","\t].join('\\n'),","","\tvertexShaderSource = [","\t\t'attribute vec3 vertexPosition;',","\t\t'attribute vec4 vertexColor;',","\t\t'attribute vec3 vertexNormal;',","","\t\t'#ifdef USE_TEXTURE',","\t\t\t'attribute vec2 textureCoordinates;',","\t\t\t'varying vec2 vertexTextureCoordinates;',","\t\t'#endif',","","\t\t'uniform mat4 projectionMatrix;',","\t\t'uniform mat4 modelViewMatrix;',","\t\t'uniform mat3 normalMatrix;',","","\t\t'#ifdef USE_LIGHT',","\t\t\t'uniform vec3 lightColor;',","\t\t\t'uniform vec3 lightDirection;',","\t\t'#endif',","","\t\t'varying vec4 fragmentColor;',","\t\t'varying vec3 lightWeight;',","","\t\t'void main(void) {',","\t\t\t'gl_Position = projectionMatrix * modelViewMatrix * vec4(vertexPosition, 1.0);',","","\t\t\t'fragmentColor = vertexColor;',","","\t\t\t'#ifdef USE_TEXTURE',","\t\t\t\t'vertexTextureCoordinates = textureCoordinates;',","\t\t\t'#endif',","","\t\t\t'#ifdef USE_LIGHT',","\t\t\t\t'vec3 ambientLightColor = vec3(1.0, 1.0, 1.0);',","","\t\t\t\t'vec3 transformedNormal = normalMatrix * vertexNormal;',","\t\t\t\t'float directionalLightWeight = max(dot(transformedNormal, lightDirection), 0.0);',","","\t\t\t\t'lightWeight = ambientLightColor + lightColor * directionalLightWeight;',","\t\t\t'#else',","\t\t\t\t'lightWeight = vec3(1.0, 1.0, 1.0);',","\t\t\t\t'vertexNormal;',","\t\t\t'#endif',","\t\t'}'","\t].join('\\n');","","Y.Shader = {","\tcompile: function(context, type, constants) {","\t\tvar shader, source;","","\t\tif (type === 'fragment') {","\t\t\tshader = context.createShader(context.FRAGMENT_SHADER);","\t\t\tsource = fragmentShaderSource;","\t\t}","\t\telse if (type === 'vertex') {","\t\t\tshader = context.createShader(context.VERTEX_SHADER);","\t\t\tsource = vertexShaderSource;","\t\t}","","\t\tconstants = constants.join('\\n');","\t\tsource = [constants, source].join('\\n');","","\t\tcontext.shaderSource(shader, source);","\t\tcontext.compileShader(shader);","","\t\tif (!context.getShaderParameter(shader, context.COMPILE_STATUS)) {","\t\t\tconsole.log(context.getShaderInfoLog(shader));","","\t\t\treturn null;","\t\t}","","\t\treturn shader;","\t},","","\tgetColorProgram: function(options) {","\t\tif (colorProgram !== null) {","\t\t\treturn colorProgram;","\t\t}","","\t\tvar context = options.context,","\t\t\tconstants = options.constants || [];","","\t\tcolorProgram = Y.Shader.link(context, constants);","","\t\treturn colorProgram;","\t},","","\tgetTextureProgram: function(options) {","\t\tif (textureProgram !== null) {","\t\t\treturn textureProgram;","\t\t}","","\t\tvar context = options.context,","\t\t\tconstants = options.constants || [];","","\t\tconstants.push('#define USE_TEXTURE');","","\t\ttextureProgram = Y.Shader.link(context, constants);","","\t\ttextureProgram.textureCoordinatesAttribute = context.getAttribLocation(textureProgram, \"textureCoordinates\");","\t\tcontext.enableVertexAttribArray(textureProgram.textureCoordinatesAttribute);","","\t\ttextureProgram.samplerUniform = context.getUniformLocation(textureProgram, \"sampler\");","","\t\treturn textureProgram;","\t},","","\tlink: function(context, constants) {","\t\tvar fragmentShader = Y.Shader.compile(context, 'fragment', constants),","\t\t\tvertexShader = Y.Shader.compile(context, 'vertex', constants),","\t\t\tprogram = context.createProgram();","","\t\tcontext.attachShader(program, fragmentShader);","\t\tcontext.attachShader(program, vertexShader);","","\t\tcontext.linkProgram(program);","","\t\tif (!context.getProgramParameter(program, context.LINK_STATUS)) {","\t\t\tconsole.log(\"Could not link shaders\");","\t\t}","","\t\tprogram.vertexPositionAttribute = context.getAttribLocation(program, \"vertexPosition\");","\t\tcontext.enableVertexAttribArray(program.vertexPositionAttribute);","","\t\tprogram.vertexColorAttribute = context.getAttribLocation(program, \"vertexColor\");","\t\tcontext.enableVertexAttribArray(program.vertexColorAttribute);","","\t\tprogram.vertexNormalAttribute = context.getAttribLocation(program, \"vertexNormal\");","\t\tcontext.enableVertexAttribArray(program.vertexNormalAttribute);","","\t\tprogram.projectionMatrixUniform = context.getUniformLocation(program, \"projectionMatrix\");","\t\tprogram.modelViewMatrixUniform = context.getUniformLocation(program, \"modelViewMatrix\");","\t\tprogram.normalMatrixUniform = context.getUniformLocation(program, \"normalMatrix\");","\t\tprogram.lightColorUniform = context.getUniformLocation(program, \"lightColor\");","\t\tprogram.lightDirectionUniform = context.getUniformLocation(program, \"lightDirection\");","","\t\treturn program;","\t}","};","","}, 'gallery-2013.08.15-00-45');","","}());"]};
}
var __cov_DHdEhs4E29JCTKK2DUvT5A = __coverage__['build/y3d-shader/y3d-shader.js'];
__cov_DHdEhs4E29JCTKK2DUvT5A.s['1']++;YUI.add('y3d-shader',function(Y,NAME){__cov_DHdEhs4E29JCTKK2DUvT5A.f['1']++;__cov_DHdEhs4E29JCTKK2DUvT5A.s['2']++;var colorProgram=null,textureProgram=null,fragmentShaderSource=['precision mediump float;','varying vec4 fragmentColor;','varying vec3 lightWeight;','#ifdef USE_TEXTURE','varying vec2 vertexTextureCoordinates;','uniform sampler2D sampler;','#endif','void main(void) {','gl_FragColor = fragmentColor;','#ifdef USE_TEXTURE','gl_FragColor = gl_FragColor * texture2D(sampler, vertexTextureCoordinates);','#endif','#ifdef USE_LIGHT','gl_FragColor = vec4(gl_FragColor.rgb * lightWeight, gl_FragColor.a);','#endif','}'].join('\n'),vertexShaderSource=['attribute vec3 vertexPosition;','attribute vec4 vertexColor;','attribute vec3 vertexNormal;','#ifdef USE_TEXTURE','attribute vec2 textureCoordinates;','varying vec2 vertexTextureCoordinates;','#endif','uniform mat4 projectionMatrix;','uniform mat4 modelViewMatrix;','uniform mat3 normalMatrix;','#ifdef USE_LIGHT','uniform vec3 lightColor;','uniform vec3 lightDirection;','#endif','varying vec4 fragmentColor;','varying vec3 lightWeight;','void main(void) {','gl_Position = projectionMatrix * modelViewMatrix * vec4(vertexPosition, 1.0);','fragmentColor = vertexColor;','#ifdef USE_TEXTURE','vertexTextureCoordinates = textureCoordinates;','#endif','#ifdef USE_LIGHT','vec3 ambientLightColor = vec3(1.0, 1.0, 1.0);','vec3 transformedNormal = normalMatrix * vertexNormal;','float directionalLightWeight = max(dot(transformedNormal, lightDirection), 0.0);','lightWeight = ambientLightColor + lightColor * directionalLightWeight;','#else','lightWeight = vec3(1.0, 1.0, 1.0);','vertexNormal;','#endif','}'].join('\n');__cov_DHdEhs4E29JCTKK2DUvT5A.s['3']++;Y.Shader={compile:function(context,type,constants){__cov_DHdEhs4E29JCTKK2DUvT5A.f['2']++;__cov_DHdEhs4E29JCTKK2DUvT5A.s['4']++;var shader,source;__cov_DHdEhs4E29JCTKK2DUvT5A.s['5']++;if(type==='fragment'){__cov_DHdEhs4E29JCTKK2DUvT5A.b['1'][0]++;__cov_DHdEhs4E29JCTKK2DUvT5A.s['6']++;shader=context.createShader(context.FRAGMENT_SHADER);__cov_DHdEhs4E29JCTKK2DUvT5A.s['7']++;source=fragmentShaderSource;}else{__cov_DHdEhs4E29JCTKK2DUvT5A.b['1'][1]++;__cov_DHdEhs4E29JCTKK2DUvT5A.s['8']++;if(type==='vertex'){__cov_DHdEhs4E29JCTKK2DUvT5A.b['2'][0]++;__cov_DHdEhs4E29JCTKK2DUvT5A.s['9']++;shader=context.createShader(context.VERTEX_SHADER);__cov_DHdEhs4E29JCTKK2DUvT5A.s['10']++;source=vertexShaderSource;}else{__cov_DHdEhs4E29JCTKK2DUvT5A.b['2'][1]++;}}__cov_DHdEhs4E29JCTKK2DUvT5A.s['11']++;constants=constants.join('\n');__cov_DHdEhs4E29JCTKK2DUvT5A.s['12']++;source=[constants,source].join('\n');__cov_DHdEhs4E29JCTKK2DUvT5A.s['13']++;context.shaderSource(shader,source);__cov_DHdEhs4E29JCTKK2DUvT5A.s['14']++;context.compileShader(shader);__cov_DHdEhs4E29JCTKK2DUvT5A.s['15']++;if(!context.getShaderParameter(shader,context.COMPILE_STATUS)){__cov_DHdEhs4E29JCTKK2DUvT5A.b['3'][0]++;__cov_DHdEhs4E29JCTKK2DUvT5A.s['16']++;console.log(context.getShaderInfoLog(shader));__cov_DHdEhs4E29JCTKK2DUvT5A.s['17']++;return null;}else{__cov_DHdEhs4E29JCTKK2DUvT5A.b['3'][1]++;}__cov_DHdEhs4E29JCTKK2DUvT5A.s['18']++;return shader;},getColorProgram:function(options){__cov_DHdEhs4E29JCTKK2DUvT5A.f['3']++;__cov_DHdEhs4E29JCTKK2DUvT5A.s['19']++;if(colorProgram!==null){__cov_DHdEhs4E29JCTKK2DUvT5A.b['4'][0]++;__cov_DHdEhs4E29JCTKK2DUvT5A.s['20']++;return colorProgram;}else{__cov_DHdEhs4E29JCTKK2DUvT5A.b['4'][1]++;}__cov_DHdEhs4E29JCTKK2DUvT5A.s['21']++;var context=options.context,constants=(__cov_DHdEhs4E29JCTKK2DUvT5A.b['5'][0]++,options.constants)||(__cov_DHdEhs4E29JCTKK2DUvT5A.b['5'][1]++,[]);__cov_DHdEhs4E29JCTKK2DUvT5A.s['22']++;colorProgram=Y.Shader.link(context,constants);__cov_DHdEhs4E29JCTKK2DUvT5A.s['23']++;return colorProgram;},getTextureProgram:function(options){__cov_DHdEhs4E29JCTKK2DUvT5A.f['4']++;__cov_DHdEhs4E29JCTKK2DUvT5A.s['24']++;if(textureProgram!==null){__cov_DHdEhs4E29JCTKK2DUvT5A.b['6'][0]++;__cov_DHdEhs4E29JCTKK2DUvT5A.s['25']++;return textureProgram;}else{__cov_DHdEhs4E29JCTKK2DUvT5A.b['6'][1]++;}__cov_DHdEhs4E29JCTKK2DUvT5A.s['26']++;var context=options.context,constants=(__cov_DHdEhs4E29JCTKK2DUvT5A.b['7'][0]++,options.constants)||(__cov_DHdEhs4E29JCTKK2DUvT5A.b['7'][1]++,[]);__cov_DHdEhs4E29JCTKK2DUvT5A.s['27']++;constants.push('#define USE_TEXTURE');__cov_DHdEhs4E29JCTKK2DUvT5A.s['28']++;textureProgram=Y.Shader.link(context,constants);__cov_DHdEhs4E29JCTKK2DUvT5A.s['29']++;textureProgram.textureCoordinatesAttribute=context.getAttribLocation(textureProgram,'textureCoordinates');__cov_DHdEhs4E29JCTKK2DUvT5A.s['30']++;context.enableVertexAttribArray(textureProgram.textureCoordinatesAttribute);__cov_DHdEhs4E29JCTKK2DUvT5A.s['31']++;textureProgram.samplerUniform=context.getUniformLocation(textureProgram,'sampler');__cov_DHdEhs4E29JCTKK2DUvT5A.s['32']++;return textureProgram;},link:function(context,constants){__cov_DHdEhs4E29JCTKK2DUvT5A.f['5']++;__cov_DHdEhs4E29JCTKK2DUvT5A.s['33']++;var fragmentShader=Y.Shader.compile(context,'fragment',constants),vertexShader=Y.Shader.compile(context,'vertex',constants),program=context.createProgram();__cov_DHdEhs4E29JCTKK2DUvT5A.s['34']++;context.attachShader(program,fragmentShader);__cov_DHdEhs4E29JCTKK2DUvT5A.s['35']++;context.attachShader(program,vertexShader);__cov_DHdEhs4E29JCTKK2DUvT5A.s['36']++;context.linkProgram(program);__cov_DHdEhs4E29JCTKK2DUvT5A.s['37']++;if(!context.getProgramParameter(program,context.LINK_STATUS)){__cov_DHdEhs4E29JCTKK2DUvT5A.b['8'][0]++;__cov_DHdEhs4E29JCTKK2DUvT5A.s['38']++;console.log('Could not link shaders');}else{__cov_DHdEhs4E29JCTKK2DUvT5A.b['8'][1]++;}__cov_DHdEhs4E29JCTKK2DUvT5A.s['39']++;program.vertexPositionAttribute=context.getAttribLocation(program,'vertexPosition');__cov_DHdEhs4E29JCTKK2DUvT5A.s['40']++;context.enableVertexAttribArray(program.vertexPositionAttribute);__cov_DHdEhs4E29JCTKK2DUvT5A.s['41']++;program.vertexColorAttribute=context.getAttribLocation(program,'vertexColor');__cov_DHdEhs4E29JCTKK2DUvT5A.s['42']++;context.enableVertexAttribArray(program.vertexColorAttribute);__cov_DHdEhs4E29JCTKK2DUvT5A.s['43']++;program.vertexNormalAttribute=context.getAttribLocation(program,'vertexNormal');__cov_DHdEhs4E29JCTKK2DUvT5A.s['44']++;context.enableVertexAttribArray(program.vertexNormalAttribute);__cov_DHdEhs4E29JCTKK2DUvT5A.s['45']++;program.projectionMatrixUniform=context.getUniformLocation(program,'projectionMatrix');__cov_DHdEhs4E29JCTKK2DUvT5A.s['46']++;program.modelViewMatrixUniform=context.getUniformLocation(program,'modelViewMatrix');__cov_DHdEhs4E29JCTKK2DUvT5A.s['47']++;program.normalMatrixUniform=context.getUniformLocation(program,'normalMatrix');__cov_DHdEhs4E29JCTKK2DUvT5A.s['48']++;program.lightColorUniform=context.getUniformLocation(program,'lightColor');__cov_DHdEhs4E29JCTKK2DUvT5A.s['49']++;program.lightDirectionUniform=context.getUniformLocation(program,'lightDirection');__cov_DHdEhs4E29JCTKK2DUvT5A.s['50']++;return program;}};},'gallery-2013.08.15-00-45');
